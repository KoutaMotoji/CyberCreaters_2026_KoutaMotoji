//===============================================================================
//
//  アイテムの処理(3D_Item.cpp)
//								制作：元地弘汰
// 
//===============================================================================

#include "3D_Item.h"
#include "manager.h"
#include "player_observer.h"

#include "game.h"


//==========================================================================================
//初期化処理
//==========================================================================================
void C3DItem::Init()
{
	CObject::SetType(TYPE_3D_ITEMS);
	CObjectX::Init();
}

//==========================================================================================
//終了処理
//==========================================================================================
void C3DItem::Uninit()
{
	CObjectX::Uninit();
}

//==========================================================================================
//更新処理
//==========================================================================================
void C3DItem::Update()
{
	if (m_bGot)
	{
		GotAnimation();
	}
	CObjectX::Update();
}

//==========================================================================================
//描画処理
//==========================================================================================
void C3DItem::Draw()
{
	CObjectX::Draw();
}

//==========================================================================================
//生成処理
//==========================================================================================
C3DItem* C3DItem::Create(D3DXVECTOR3 pos)
{
	C3DItem* item = new C3DItem();

	item->BindModel("data\\MODEL\\Item000.x");
	item->SetModelParam(pos);
	item->Init();

	return item;
}

//==========================================================================================
//取得済の演出処理
//==========================================================================================
void  C3DItem::GotAnimation()
{
	CObjectX::SetPos(CPlayerObserver::GetInstance()->GetPlayerPos());
	
	CObjectX::AddRot({ 0.0f,0.07f,0.0f });
	CObjectX::AddSize({ -0.02,-0.02 ,-0.02 });

	++m_nLestTime;
	if (m_nLestTime > MIN_CNT)
	{
		Release();
		return;
	}
}
