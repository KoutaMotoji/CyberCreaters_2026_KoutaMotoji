//===============================================================================
//
//  C++使った2D(score.cpp)
//								制作：元地弘汰
// 
//===============================================================================
#include "score.h"
#include "manager.h"

const D3DXVECTOR3 CScore::DEFAULT_POSITION = { SCREEN_WIDTH - MAX_WIDTH / 2,MAX_HEIGHT,0.0f };
int CScore::SaveScore = 0;

//==========================================================================================
//コンストラクタ
//==========================================================================================
CScore::CScore() : m_Score(0)
{

}

//==========================================================================================
//デストラクタ
//==========================================================================================
CScore::~CScore()
{

}

//==========================================================================================
//初期化処理
//==========================================================================================
void CScore::Init()
{
	D3DXVECTOR3 pos = DEFAULT_POSITION;
	for (int i = 0; i < MAX_DIGIT; i++)
	{
		m_number[i] = CNumber::Create(pos, MAX_HEIGHT, MAX_WIDTH);
		pos.x -= MAX_WIDTH / 1.95f;
	}
}

//==========================================================================================
//初期化処理
//==========================================================================================
void CScore::Init(D3DXVECTOR3 pos)
{
	for (int i = 0; i < MAX_DIGIT; i++)
	{
		m_number[i] = CNumber::Create(pos, MAX_HEIGHT, MAX_WIDTH);
		pos.x -= MAX_WIDTH / 1.75f;
	}
}

//==========================================================================================
//終了処理
//==========================================================================================
void CScore::Uninit()
{
	for (int i = 0; i < MAX_DIGIT; i++)
	{
		m_number[i]->Uninit();
	}
}

//==========================================================================================
//更新処理
//==========================================================================================
void CScore::Update()
{
	for (int i = 0; i < MAX_DIGIT; i++)
	{
		m_number[i]->Update();
	}
}

//==========================================================================================
//描画処理
//==========================================================================================
void CScore::Draw()
{
	for (int i = 0; i < MAX_DIGIT; i++)
	{
		m_number[i]->Draw();
	}
}

//==========================================================================================
//生成処理
//==========================================================================================
CScore* CScore::Create()
{
	CScore* number = new CScore;
	number->Init();
	return number;
}

//==========================================================================================
//生成処理
//==========================================================================================
CScore* CScore::Create(D3DXVECTOR3 pos)
{
	CScore* number = new CScore;
	number->Init(pos);
	return number;
}

//==========================================================================================
//数値の各桁の数字を抜き出す
//==========================================================================================
void CScore::GetLastNum()
{
	int nType = 1;
	int nValue = m_Score;
	int Num = 0;
	for (int i = 0; i < MAX_DIGIT; ++i)
	{
		nType *= 10;
		Num = (nValue % nType * 10) / nType;
		m_number[i]->SetNum(Num);
	}
}
